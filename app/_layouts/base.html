<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <!--
    ############################################################################
    # I hope you like my source code! If you're trying to figure out what      #
    # powers this website, have a look at the humans.txt :-)                   #
    ############################################################################
    -->

    {% if page.title %}
        {% capture title %}{{ page.title }} | {% endcapture %}
    {% elsif paginator.page > 1 %}
        {% capture title %}Page {{ paginator.page }} | {% endcapture %}
    {% endif %}
    <title>{{ title }}{{ site.title }}</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="{{ site.baseurl }}/css/style.css">
    <link rel="alternate" type="application/rss+xml" href="{{ site.baseurl }}/feed.rss" title="{{ site.titleRss }}">

    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="{{ site.baseurl }}/apple-touch-icon-144x144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="{{ site.baseurl }}/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="{{ site.baseurl }}/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="{{ site.baseurl }}/apple-touch-icon-precomposed.png">

    <script src="{{ site.baseurl }}/js/modernizr.min.js"></script>
    <script>
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', '{{ site.googleAnalyticsID }}']);
        _gaq.push(['_setSiteSpeedSampleRate', 100]);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</head>
<body{% if page.pageId %} id="{{ page.pageId }}"{% endif %}>
    <div id="wrapper">
        <header id="header" role="banner">
            {% unless page.title %}<h1>{% endunless %}
                <a rel="home" href="{{ site.baseurl }}/">{{ site.title }}</a>
            {% unless page.title %}</h1>{% endunless %}
        </header>

        <div id="skip-main-menu">
            <a href="#main-menu">Skip to main menu</a>
        </div>

        <div id="main" role="main">
            <!--[if lt IE 8]>
                <p class="chromeframe alert alert-error">
                    Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.
                </p>
            <![endif]-->

            {{ content }}
        </div>

        <div id="sidebar">
            <div id="tetris">
                <div class="image"></div>
                <div class="game">
                    <canvas width="120" height="240"></canvas>
                    <script class="audio" type="text/html">
                        <audio loop>
                            <source src="{{ site.baseurl }}/audio/korobeiniki.ogg" type="audio/ogg">
                            <source src="{{ site.baseurl }}/audio/korobeiniki.aac" type="audio/mp4">
                            <source src="{{ site.baseurl }}/audio/korobeiniki.mp3" type="audio/mpeg">
                        </audio>
                    </script>

                    <div class="overlay gameover">Game Over</div>

                    <div class="overlay help-box">
                        <strong>Controls</strong><br>
                        → : Move right<br>
                        ← : Move left<br>
                        ↑ : Soft drop<br>
                        ↓ : Rotate<br>
                        ? : Help<br>
                        Esc : Close<br>
                        <br>
                        <strong>Scoring</strong><br>
                        40 : 1 row<br>
                        100 : 2 rows<br>
                        300 : 3 rows<br>
                        1200 : 4 rows<br>
                        1/row : Soft drop<br>
                    </div>

                    <div class="score">
                        Score: <span class="count"></span>
                    </div>
                    <div class="highscore">
                        Highscore: <span class="count"></span>
                    </div>

                    <button class="btn btn-mini help-button" title="Help">
                        <i class="icon-question-sign"></i>
                    </button>

                    <button class="btn btn-mini sound"><i></i></button>

                    <button class="btn btn-mini close" title="Close">
                        <i class="icon-remove-sign"></i>
                    </button>
                </div>
            </div>

            <nav id="main-menu" role="navigation">
                <ul>
                    <li><a rel="home" href="{{ site.baseurl }}/">Home</a></li>
                    <li><a rel="author" href="{{ site.baseurl }}/about/">About</a></li>
                    <li><a href="{{ site.baseurl }}/projects/">Projects</a></li>
                    <li><a href="{{ site.baseurl }}/archives/">Archives</a></li>
                </ul>

                <ul>
                    <li><a rel="me" href="https://github.com/Rowno">GitHub</a></li>
                    <li><a rel="me" href="https://plus.google.com/108621262237470431255/">Google+</a></li>
                    <li><a rel="me" href="http://www.linkedin.com/in/rolandwarmerdam">LinkedIn</a></li>
                </ul>
            </nav>
        </div>

        <div id="skip-top">
            <a href="#main">Skip to top of page</a>
        </div>

        <footer id="footer" role="contentinfo">
            {{ site.copyright }}

            <br>

            <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0</a>
        </footer>
    </div>


    <script src="{{ site.baseurl }}/js/lab.min.js"></script>
    <script>
        var Site = (function () {
            'use strict';

            return {
                variables: {
                    githubUrl: '{{ site.githubUrl }}'
                    {% if page.commentsIssueId %}
                    ,commentsIssueId: {{ page.commentsIssueId }}
                    {% endif %}
                }
            };
        }());

        (function () {
            'use strict';

            $LAB.setGlobalDefaults({
                BasePath: '{{ site.baseurl }}/'
            })

            $LAB
                .script('js/jquery.min.js')
                .wait(function () {
                    if (Modernizr.canvas) {
                        $('#tetris .image').on('click', function () {
                            $LAB.script('js/tetris.js');
                        });
                    }
                })
                {% if page.scripts %}
                    {% for path in page.scripts %}
                        .script('{{ path }}').wait()
                    {% endfor %}
                {% endif %};
        }());
    </script>
</body>
</html>
